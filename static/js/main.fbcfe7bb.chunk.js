(this["webpackJsonpbsc-dapp-example"]=this["webpackJsonpbsc-dapp-example"]||[]).push([[0],{110:function(e,n){},113:function(e,n){},124:function(e,n,t){},125:function(e){e.exports=JSON.parse("{}")},131:function(e,n,t){},133:function(e,n,t){"use strict";t.r(n);var s=t(1),a=t.n(s),r=t(30),c=t.n(r),i=(t(99),t(15)),o=t(91),l=(t.p,t(124),t(125),t(16)),u=t(3),d=t.n(u),j=t(144),h=t(139),b=t(145),x=t(146),O="http://localhost:6324d/00b6325388655acd841aa94a8121142f";function p(e){return fetch(O+e)}var f=t(2);function m(){return(m=Object(l.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/action?action=AutoClaim");case 2:if(200!=(n=e.sent).status){e.next=8;break}return e.next=6,n.json();case 6:"AutoClaim"==(t=e.sent).message&&document.getElementById("AutoClaim")&&(document.getElementById("AutoClaim").checked=t.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){var n=e.isBrowserExtensionInstalled?"\u5df2\u5b89\u88c5\u94b1\u5305":"\u672a\u5b89\u88c5\u94b1\u5305",t=e.isBrowserExtensionEnabled?"\u5df2\u8fde\u63a5":"\u6fc0\u6d3b\u94b1\u5305";return Object(f.jsx)(j.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(f.jsxs)(h.a,{fluid:!0,children:[Object(f.jsx)(j.a.Brand,{href:"#home",children:"\u9732\u5a1c-\u8fdc\u7a0b\u6258\u7ba1"}),Object(f.jsx)(j.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(f.jsxs)(j.a.Collapse,{id:"responsive-navbar-nav",children:[Object(f.jsxs)(b.a,{className:"me-auto",children:[Object(f.jsx)(b.a.Link,{href:"https://lunarush.io/",target:"_blank",children:"\u9732\u5a1c\u5b98\u7f51"}),Object(f.jsx)(b.a.Link,{href:"https://app.lunarush.io/",target:"_blank",children:"\u5f00\u59cb\u6e38\u620f"}),Object(f.jsx)(b.a.Link,{href:"https://poocoin.app/tokens/0xde301d6a2569aefcfe271b9d98f318baee1d30a4",target:"_blank",children:"\u4ef7\u683c\u56fe\u8868"})]}),Object(f.jsxs)(b.a,{children:[Object(f.jsx)(b.a.Link,{onClick:function(){return window.refreshLunaSessions()},children:"\u5237\u65b0\u5217\u8868"}),Object(f.jsx)(b.a.Link,{href:"#AutoClaim",children:Object(f.jsx)(x.a,{children:Object(f.jsx)(x.a.Check,{type:"switch",id:"AutoClaim",label:"\u81ea\u52a8\u63d0\u73b0",onClick:function(){return function(){return m.apply(this,arguments)}()}})})}),Object(f.jsx)(b.a.Link,{as:"p",children:n}),e.isBrowserExtensionInstalled&&Object(f.jsx)(b.a.Link,{onClick:function(){return e.enableBrowserExtension()},disabled:e.isBrowserExtensionEnabled,eventKey:2,children:t})]})]})]})})},L=t(5),g=t(143),S=t(92),k=t(147),v=t(90),B=t(140),_=t(141),y=t(142),C=(t(131),function(e){if(0==e)return"";for(var n=(e+"").split(""),t=0;t<13;t++)n[t]||(n[t]="0");e=1*n.join("");var s=36e5,a=24*s,r=(new Date).getTime()-e;if(r<0)return"\u4e0d\u4e45\u524d";var c=r/2592e6,i=r/(7*a),o=r/a,l=r/s,u=r/6e4,d=function(e){return e<10?"0"+e:e};return c>12?function(){var n=new Date(e);return n.getFullYear()+"\u5e74"+d(n.getMonth()+1)+"\u6708"+d(n.getDate())+"\u65e5"}():c>=1?parseInt(c)+"\u6708\u524d":i>=1?parseInt(i)+"\u5468\u524d":o>=1?parseInt(o)+"\u5929\u524d":l>=1?parseInt(l)+"\u5c0f\u65f6\u524d":u>=1?parseInt(u)+"\u5206\u949f\u524d":"\u521a\u521a"});function I(e,n,t){var s=n.substr(0,4)+"..."+n.substr(38,4);return Object(f.jsx)(g.a,{rootClose:!0,trigger:"click",placement:"right",overlay:Object(f.jsxs)(S.a,{id:"popover-positioned-".concat(n),children:[Object(f.jsx)(S.a.Header,{as:"h6",children:n}),Object(f.jsx)(S.a.Body,{children:Object(f.jsxs)(k.a,{className:"mb-3",children:[Object(f.jsx)(v.a,{placeholder:"\u4fee\u6539\u5907\u6ce8","aria-label":"\u4fee\u6539\u5907\u6ce8","aria-describedby":"basic-addon2",id:"mark-"+n}),Object(f.jsx)(B.a,{variant:"outline-secondary",onClick:function(){return function(e,n,t){return H.apply(this,arguments)}(e,n,document.getElementById("mark-"+n).value)},children:"\u4fee\u6539"})]})})]}),children:Object(f.jsxs)(B.a,{variant:"outline-secondary",children:[0!=t.length&&Object(f.jsx)("h4",{className:"text-dark",children:t}),Object(f.jsx)("small",{children:s})]})},n)}function E(e,n){return Object(f.jsxs)(h.a,{children:[Object(f.jsxs)("h4",{children:[e.toFixed(2)," lus"]}),Object(f.jsxs)("h6",{children:[n.toFixed(2)," bnb"]})]})}function N(e,n){return Object(f.jsxs)(h.a,{children:[Object(f.jsxs)("h4",{children:[e.toFixed(2)," mlus"]}),Object(f.jsxs)("h6",{children:[n.toFixed(2)," (",(.965*(n-e)).toFixed(2),")"]})]})}function A(e){if(null!=e){var n=0;for(var t in e)n+=e[t];return Object(f.jsx)(f.Fragment,{children:n})}return Object(f.jsx)(f.Fragment,{children:"0"})}function M(e,n){var t=0;if(null!=n)for(var s in n)t+=n[s];if(0==t)return Object(f.jsx)(f.Fragment,{children:"-"});var a=.965*(e.all_MLUSTotal-e.all_Mlus),r=15*t;return Object(f.jsxs)(f.Fragment,{children:["\u6536\u76ca:",(a/r*100-100).toFixed(2),"%"]})}function F(e){return null!=e?Object(f.jsxs)("div",{children:[e.common&&Object(f.jsxs)("small",{className:"common",children:["C:",e.common]}),e.rare&&Object(f.jsxs)("small",{className:"rare",children:["R:",e.rare]}),e.elite&&Object(f.jsxs)("small",{className:"elite",children:["SR:",e.elite]}),e.epic&&Object(f.jsxs)("small",{className:"epic",children:["SSR:",e.epic]}),e.legendary&&Object(f.jsxs)("small",{className:"legendary",children:["L:",e.legendary]}),e.mythical&&Object(f.jsxs)("small",{className:"mythical",children:["SL:",e.mythical]}),e.divine&&Object(f.jsxs)("small",{className:"divine",children:["SSL:",e.divine]})]}):Object(f.jsx)(f.Fragment,{children:"-"})}function T(){return(T=Object(l.a)(d.a.mark((function e(n,t){var s,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.dapp.currentAccount.address.toLowerCase()==t.toLowerCase()){e.next=3;break}return console.log("\u8bf7\u5148\u5207\u6362\u94b1\u5305\u5730\u5740\u5230",t),e.abrupt("return");case 3:return console.log(n,t),e.next=6,p("/get_message?addr="+t);case 6:if(200!=(s=e.sent).status){e.next=34;break}return e.next=10,s.json();case 10:a=e.sent,e.t0=a.message,e.next="sign"===e.t0?14:"ok"===e.t0?31:34;break;case 14:return e.next=16,window.dapp.browserExtension.ethereum.request({method:"personal_sign",params:[a.data,window.dapp.currentAccount.address]});case 16:return r=e.sent,e.next=19,p("/signlogin?addr="+t+"&sign="+r);case 19:if(200!=(s=e.sent).status){e.next=30;break}return e.next=23,s.json();case 23:c=e.sent,e.t1=c.message,e.next="ok"===e.t1?27:30;break;case 27:return window.LunaSessions.LunaSessions[n].Luna.IsLogin=!0,window.setLunaSessions(Object(L.a)({},window.LunaSessions)),e.abrupt("break",30);case 30:return e.abrupt("break",34);case 31:return window.LunaSessions.LunaSessions[n].Luna.IsLogin=!0,window.setLunaSessions(Object(L.a)({},window.LunaSessions)),e.abrupt("break",34);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(l.a)(d.a.mark((function e(n,t){var s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("StartScript",n,t),e.next=3,p("/action?action=start&addr="+t);case 3:if(200!=(s=e.sent).status){e.next=9;break}return e.next=7,s.json();case 7:"start"==(a=e.sent).message&&a.data&&(window.LunaSessions.LunaSessions[n].Luna.ISRunning=!0,window.setLunaSessions(Object(L.a)({},window.LunaSessions)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(l.a)(d.a.mark((function e(n,t){var s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("StopScript",n,t),e.next=3,p("/action?action=stop&addr="+t);case 3:if(200!=(s=e.sent).status){e.next=9;break}return e.next=7,s.json();case 7:"stop"==(a=e.sent).message&&a.data&&(window.LunaSessions.LunaSessions[n].Luna.ISStoping=!0,window.setLunaSessions(Object(L.a)({},window.LunaSessions)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(d.a.mark((function e(n,t){var s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Continue",n,t),e.next=3,p("/action?action=continue&addr="+t);case 3:if(200!=(s=e.sent).status){e.next=9;break}return e.next=7,s.json();case 7:"continue"==(a=e.sent).message&&a.data&&(window.LunaSessions.LunaSessions[n].Luna.ISStoping=!1,window.setLunaSessions(Object(L.a)({},window.LunaSessions)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(l.a)(d.a.mark((function e(n,t,s){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ChangeMark",n,t),e.next=3,p("/action?action=mark&addr="+t+"&mark="+encodeURIComponent(s));case 3:if(200!=(a=e.sent).status){e.next=9;break}return e.next=7,a.json();case 7:"mark"==(r=e.sent).message&&(window.LunaSessions.LunaSessions[n].Mark=r.data,window.setLunaSessions(Object(L.a)({},window.LunaSessions)));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,n,t,s,a){if(t)return Object(f.jsxs)(_.a,{size:"sm",children:[!s&&Object(f.jsx)(B.a,{variant:"warning",onClick:function(){return function(e,n){return R.apply(this,arguments)}(e,n)},children:"\u542f\u52a8\u811a\u672c"}),s&&!a&&Object(f.jsx)(B.a,{variant:"danger",onClick:function(){return function(e,n){return D.apply(this,arguments)}(e,n)},children:"\u6682\u505c\u811a\u672c"}),s&&a&&Object(f.jsx)(B.a,{variant:"success",onClick:function(){return function(e,n){return U.apply(this,arguments)}(e,n)},children:"\u7ee7\u7eed\u811a\u672c"})]});var r=!window.dapp.isBrowserExtensionEnabled||window.dapp.currentAccount&&window.dapp.currentAccount.address.toLowerCase()!=n.toLowerCase();return Object(f.jsx)(B.a,{size:"sm",onClick:function(){return function(e,n){return T.apply(this,arguments)}(e,n)},disabled:r,children:r?"\u8fde\u63a5\u94b1\u5305":"\u6388\u6743\u767b\u5f55"})}var z=function(){var e=a.a.useState({LunaSessions:[],AutoClaim:!1}),n=Object(i.a)(e,2),t=n[0],s=n[1],r=a.a.useState({all_Mlus:0,all_MLUSTotal:0,all_LunaRushTokenBalance:0,all_BNBBalance:0,all_Day_mlus:0}),c=Object(i.a)(r,2),o=c[0],u=c[1],j=a.a.useState({}),b=Object(i.a)(j,2),x=b[0],O=b[1];return window.all_heros=x,window.all_statistical=o,window.LunaSessions=t,window.setLunaSessions=s,window.refreshLunaSessions=Object(l.a)(d.a.mark((function e(){var n,t,a,r,c,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/get_tokenall");case 2:if(200!=(n=e.sent).status){e.next=11;break}return e.next=6,n.json();case 6:if(t=e.sent,document.getElementById("AutoClaim")&&(document.getElementById("AutoClaim").checked=t.AutoClaim),s(t),console.log(t),t.LunaSessions){for(a={},r={all_Mlus:0,all_MLUSTotal:0,all_LunaRushTokenBalance:0,all_BNBBalance:0,all_Day_mlus:0},c=0;c<t.LunaSessions.length;c++){if((i=t.LunaSessions[c]).Luna)for(o in i.Luna.HeroInfos)void 0==a[o]&&(a[o]=0),a[o]+=i.Luna.HeroInfos[o];r.all_Mlus+=i.Luna.Mlus,r.all_MLUSTotal+=i.Luna.MLUSTotal,r.all_LunaRushTokenBalance+=i.LunaRushTokenBalance,r.all_BNBBalance+=i.BNBBalance,r.all_Day_mlus+=i.Luna.Day_mlus}u(Object(L.a)({},r)),O(Object(L.a)({},a))}case 11:case"end":return e.stop()}}),e)}))),Object(f.jsx)(h.a,{fluid:!0,children:Object(f.jsxs)(y.a,{striped:!0,bordered:!0,variant:"light",size:"sm",responsive:"sm",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"#"}),Object(f.jsx)("th",{children:"\u94b1\u5305\u4fe1\u606f"}),Object(f.jsx)("th",{children:"\u82f1\u96c4\u7edf\u8ba1"}),Object(f.jsx)("th",{children:"\u6e38\u620f\u4f59\u989d"}),Object(f.jsx)("th",{children:"\u94b1\u5305\u4f59\u989d"}),Object(f.jsx)("th",{children:"\u82f1\u96c4\u603b\u6570"}),Object(f.jsx)("th",{children:"\u4f53\u529b\u7edf\u8ba1"}),Object(f.jsx)("th",{children:"\u5f53\u524d\u5173\u5361"}),Object(f.jsx)("th",{children:"\u602a\u8840\u91cf"}),Object(f.jsx)("th",{children:"\u5f00\u59cb\u65f6\u95f4"}),Object(f.jsx)("th",{children:"\u9884\u8ba1\u65e5\u4ea7"}),Object(f.jsx)("th",{children:"\u63d0\u73b0\u8d39\u7387"}),Object(f.jsx)("th",{children:"\u64cd\u4f5c"}),Object(f.jsx)("th",{children:"\u6700\u540e\u9519\u8bef"})]})}),Object(f.jsxs)("tbody",{children:[Object(f.jsxs)("tr",{className:"center_td",children:[Object(f.jsx)("td",{children:"\u603b"}),Object(f.jsx)("td",{children:M(o,x)}),Object(f.jsx)("td",{children:F(x)}),Object(f.jsx)("td",{children:N(o.all_Mlus,o.all_MLUSTotal)}),Object(f.jsx)("td",{children:E(o.all_LunaRushTokenBalance,o.all_BNBBalance)}),Object(f.jsx)("td",{children:A(x)}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{}),Object(f.jsxs)("td",{children:["\u2248",o.all_Day_mlus.toFixed(2)]}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{}),Object(f.jsx)("td",{})]},"all"),t.LunaSessions&&t.LunaSessions.map((function(e,n){return Object(f.jsxs)("tr",{className:"center_td",children:[Object(f.jsx)("td",{children:n+1}),Object(f.jsx)("td",{children:I(n,e.Luna.WalletAddress,e.Mark)}),Object(f.jsx)("td",{children:F(e.Luna.HeroInfos)}),Object(f.jsx)("td",{children:N(e.Luna.Mlus,e.Luna.MLUSTotal)}),Object(f.jsx)("td",{children:E(e.LunaRushTokenBalance,e.BNBBalance)}),Object(f.jsx)("td",{children:A(e.Luna.HeroInfos)}),Object(f.jsx)("td",{children:e.Luna.StaminaCount}),Object(f.jsxs)("td",{children:[e.Luna.Level,"-",e.Luna.BossLevelHp]}),Object(f.jsx)("td",{children:e.Luna.Current_HP}),Object(f.jsx)("td",{children:C(e.CreateTime)}),Object(f.jsxs)("td",{children:["\u2248",e.Luna.Day_mlus.toFixed(2)]}),Object(f.jsx)("td",{children:(t=e.Luna.Fee,s=e.Luna.Last_exchange,0==s?0==t?Object(f.jsx)("h4",{children:"-"}):Object(f.jsxs)("h4",{children:[t,"%"]}):Object(f.jsxs)(h.a,{children:[Object(f.jsxs)("h4",{children:[t,"%"]}),Object(f.jsx)("h6",{children:C(s)})]}))}),Object(f.jsx)("td",{children:P(n,e.Luna.WalletAddress,e.Luna.IsLogin,e.Luna.ISRunning,e.Luna.ISStoping)}),Object(f.jsx)("td",{children:Object(f.jsx)("p",{className:"text-truncate",children:e.Error})})]},n);var t,s}))]})]})})};function J(){var e=a.a.useMemo((function(){return new o.a}),[]);window.dapp=e;var n=a.a.useState(e.isBrowserExtensionEnabled),t=Object(i.a)(n,2),s=(t[0],t[1]),r=a.a.useState(e.currentAddress),c=Object(i.a)(r,2),l=(c[0],c[1]);return a.a.useEffect((function(){return e.onEnabled((function(e){s(!0),l(e)}))}),[]),a.a.useEffect((function(){return e.onAccountChanged((function(e){l(e)}))}),[]),Object(f.jsxs)("div",{className:"App",children:[w(e),Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)(z,{})})]})}var W=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,148)).then((function(n){var t=n.getCLS,s=n.getFID,a=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),s(e),a(e),r(e),c(e)}))},q=(t(132),new URLSearchParams(document.location.search).get("url"));q&&q.length>0&&(O=q),setTimeout((function(){c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(J,{})}),document.getElementById("root")),window.refreshLunaSessions&&window.refreshLunaSessions()}),500),W()},99:function(e,n,t){}},[[133,1,2]]]);
//# sourceMappingURL=main.fbcfe7bb.chunk.js.map